<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å‹•ç‰©ç”Ÿå­˜å¤§æŒ‘æˆ° | æ†å®šæ€§ç¸½éƒ¨</title>
    
    <!-- å¼•å…¥ Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- å¼•å…¥ FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- è‡ªå®šç¾©æ¨£å¼ -->
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f0fdf4; /* Light Green bg */
            color: #1e293b; /* Slate-800 */
            font-size: 18px; /* æå‡åŸºç¤å­—é«”å¤§å° */
            line-height: 1.6;
        }

        /* å€å¡Šé€šç”¨æ¨£å¼ */
        .learning-section {
            background: white;
            border-radius: 1.5rem;
            padding: 2rem;
            margin-bottom: 2.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
        }

        /* è©•é‡å€å¡Šæ¨£å¼ */
        .quiz-block {
            background-color: #f8fafc;
            border-left: 8px solid #3b82f6;
            padding: 1.5rem;
            margin-top: 2rem;
            border-radius: 0.75rem;
        }

        /* éŠæˆ²ç•«å¸ƒå®¹å™¨ */
        .game-container {
            position: relative;
            width: 100%;
            height: 300px; /* åŠ é«˜ä¸€é»é©æ‡‰å¤§å­—é«” */
            border-radius: 1.5rem;
            overflow: hidden;
            background-size: cover;
            background-position: center;
            margin-bottom: 1.5rem;
            transition: all 0.5s ease;
        }

        /* é¸é …æŒ‰éˆ•æ¨£å¼ */
        .choice-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
            background: white;
            border: 3px solid #e2e8f0;
            border-radius: 1rem;
            transition: all 0.2s;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        .choice-btn:hover {
            border-color: #3b82f6;
            background-color: #eff6ff;
            transform: translateY(-4px);
        }
        .choice-btn:active {
            transform: translateY(0);
        }
        .choice-btn.correct {
            background-color: #dcfce7;
            border-color: #22c55e;
            color: #15803d;
        }
        .choice-btn.wrong {
            background-color: #fee2e2;
            border-color: #ef4444;
            color: #b91c1c;
            opacity: 0.8;
        }

        /* --- åˆ†é¡éŠæˆ²æ¨£å¼ --- */
        .category-box {
            transition: all 0.3s;
            border: 4px dashed #cbd5e1;
        }
        .category-box.active-target {
            border-color: #3b82f6;
            background-color: #eff6ff;
            transform: scale(1.02);
        }
        .animal-card {
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
            width: 100px; /* åŠ å¤§å¡ç‰‡ */
            height: 100px;
        }
        .animal-card.selected {
            transform: scale(1.1);
            box-shadow: 0 0 0 4px #3b82f6;
            background-color: #eff6ff;
        }
        .animal-card.sorted {
            cursor: default;
            transform: scale(1);
            box-shadow: none;
            background-color: #ffffff;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        .shake {
            animation: shake 0.3s ease-in-out;
            border-color: #ef4444 !important;
        }

        /* --- èœ¥èœ´ & åŒ—æ¥µç†Šå ´æ™¯å‹•ç•« --- */
        #lizard-game-bg { background: linear-gradient(to right, #fde047 40%, #94a3b8 40%); }
        #bear-game-bg { background: linear-gradient(to bottom, #bae6fd, #f0f9ff); }
        
        #lizard { transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1); }
        .lizard-shiver { animation: shiver 0.2s infinite; color: #3b82f6; }
        .lizard-happy { color: #16a34a; transform: scale(1.1); }
        
        #bear { transition: all 0.5s; }
        .bear-shiver { animation: shiver 0.2s infinite; }
        .bear-warm { filter: drop-shadow(0 0 15px rgba(239, 68, 68, 0.6)); }
        
        @keyframes shiver {
            0% { transform: translateX(-50%) rotate(0deg); }
            25% { transform: translateX(-52%) rotate(-2deg); }
            75% { transform: translateX(-48%) rotate(2deg); }
            100% { transform: translateX(-50%) rotate(0deg); }
        }

        /* é–å®šæŒ‰éˆ• */
        .btn-locked {
            background-color: #cbd5e1 !important;
            cursor: not-allowed;
            pointer-events: none;
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- å°èˆªåˆ— -->
    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="bg-green-600 text-white w-10 h-10 rounded-xl flex items-center justify-center text-xl">
                    <i class="fa-solid fa-gamepad"></i>
                </div>
                <h1 class="font-bold text-2xl tracking-wide text-slate-800">å‹•ç‰©ç”Ÿå­˜å¤§æŒ‘æˆ°</h1>
            </div>
            <div class="text-base font-medium text-slate-600 bg-slate-100 px-4 py-2 rounded-lg">å–®å…ƒ 3ï¼šå…§æº«èˆ‡å¤–æº«</div>
        </div>
    </nav>

    <main class="flex-grow w-full max-w-5xl mx-auto p-4 md:p-8 space-y-12">
        
        <!-- æŒ‘æˆ° 1ï¼šåˆ†é¡å¤§è€ƒé©— -->
        <section class="learning-section">
            <div class="flex items-center gap-3 mb-6">
                <span class="bg-indigo-100 text-indigo-800 text-base px-3 py-1 rounded-lg font-bold">æŒ‘æˆ° 1</span>
                <h2 class="text-3xl font-bold text-slate-800">èª°æ˜¯å…§æº«ï¼Ÿèª°æ˜¯å¤–æº«ï¼Ÿ</h2>
            </div>
            <p class="text-slate-600 mb-8 text-xl font-medium">
                <i class="fa-solid fa-hand-pointer animate-bounce text-indigo-500"></i> è«‹å…ˆ<b>é»é¸ä¸‹æ–¹å‹•ç‰©</b>ï¼Œå†<b>é»æ“Šæ­£ç¢ºçš„ç±ƒå­</b>é€²è¡Œåˆ†é¡ã€‚
            </p>

            <!-- åˆ†é¡éŠæˆ²å€ -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                <!-- å¤–æº«ç±ƒå­ -->
                <div id="target-ecto" onclick="placeAnimal('ecto')" class="category-box bg-yellow-50 rounded-2xl p-6 min-h-[240px] cursor-pointer hover:bg-yellow-100 relative">
                    <div class="flex items-center gap-4 mb-4 border-b-2 border-yellow-200 pb-3">
                        <div class="bg-yellow-400 text-white w-10 h-10 rounded-full flex items-center justify-center text-xl">
                            <i class="fa-solid fa-sun"></i>
                        </div>
                        <h3 class="font-bold text-2xl text-slate-800">å¤–æº«å‹•ç‰©</h3>
                    </div>
                    <!-- æ”¶é›†åˆ°çš„å‹•ç‰© -->
                    <div id="container-ecto" class="grid grid-cols-3 gap-3"></div>
                    
                    <!-- çŸ¥è­˜è§£é– (éš±è—) -->
                    <div id="info-ecto" class="hidden mt-6 text-base text-slate-700 bg-white/60 p-4 rounded-xl shadow-sm border border-yellow-200">
                        <ul class="list-disc list-inside space-y-2">
                            <li>é«”æº«ä¸»è¦<strong class="text-yellow-700 text-lg">éš¨ç’°å¢ƒæ”¹è®Š</strong></li>
                            <li>èª¿ç¯€æ–¹å¼ï¼šè¡Œç‚º (æ›¬å¤ªé™½/èº²é™°å½±)</li>
                        </ul>
                    </div>
                </div>

                <!-- å…§æº«ç±ƒå­ -->
                <div id="target-endo" onclick="placeAnimal('endo')" class="category-box bg-blue-50 rounded-2xl p-6 min-h-[240px] cursor-pointer hover:bg-blue-100 relative">
                    <div class="flex items-center gap-4 mb-4 border-b-2 border-blue-200 pb-3">
                        <div class="bg-blue-400 text-white w-10 h-10 rounded-full flex items-center justify-center text-xl">
                            <i class="fa-solid fa-fire"></i>
                        </div>
                        <h3 class="font-bold text-2xl text-slate-800">å…§æº«å‹•ç‰©</h3>
                    </div>
                    <!-- æ”¶é›†åˆ°çš„å‹•ç‰© -->
                    <div id="container-endo" class="grid grid-cols-3 gap-3"></div>

                    <!-- çŸ¥è­˜è§£é– (éš±è—) -->
                    <div id="info-endo" class="hidden mt-6 text-base text-slate-700 bg-white/60 p-4 rounded-xl shadow-sm border border-blue-200">
                        <ul class="list-disc list-inside space-y-2">
                            <li>é«”æº«<strong class="text-blue-700 text-lg">ç¶­æŒåœ¨ä¸€å®šç¯„åœ</strong></li>
                            <li>èª¿ç¯€æ–¹å¼ï¼šä»£è¬ç”¢ç†± (é€²é£Ÿ/é¡«æŠ–)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- å¾…åˆ†é¡å‹•ç‰©å€ -->
            <div id="animal-pool" class="bg-slate-100 p-6 rounded-2xl flex flex-wrap gap-6 justify-center min-h-[140px] items-center border-2 border-slate-200">
                <!-- å‹•ç‰©å¡ç‰‡ç”± JS ç”Ÿæˆ -->
            </div>
            
            <div id="sort-feedback" class="text-center text-lg font-bold text-indigo-600 mt-4 min-h-[2rem]"></div>

            <!-- è©•é‡ 1 (éŠæˆ²å®Œæˆå¾Œè§£é–) -->
            <div id="quiz-1-block" class="quiz-block hidden opacity-0 transition-opacity duration-1000">
                <div class="font-bold text-blue-600 mb-4 text-xl"><i class="fa-solid fa-pen"></i> éš¨å ‚å°æ¸¬é©— 1</div>
                <p class="text-lg text-slate-800 mb-4 font-bold">ä¸‹åˆ—é—œæ–¼å‹•ç‰©é«”æº«èª¿ç¯€çš„æ•˜è¿°ï¼Œä½•è€…æ­£ç¢ºï¼Ÿ</p>
                <div class="space-y-3 text-lg">
                    <label class="flex items-center gap-3 cursor-pointer hover:bg-blue-50 p-2 rounded-lg transition"><input type="radio" name="q1" value="A" class="w-5 h-5"> <span>èœ¥èœ´æ˜¯å…§æº«å‹•ç‰©ï¼Œé«”æº«å›ºå®šã€‚</span></label>
                    <label class="flex items-center gap-3 cursor-pointer hover:bg-blue-50 p-2 rounded-lg transition"><input type="radio" name="q1" value="B" class="w-5 h-5"> <span>äººé¡æ˜¯å¤–æº«å‹•ç‰©ï¼Œéœ€è¦æ›¬å¤ªé™½æ‰èƒ½å‹•ã€‚</span></label>
                    <label class="flex items-center gap-3 cursor-pointer hover:bg-blue-50 p-2 rounded-lg transition"><input type="radio" name="q1" value="C" class="w-5 h-5"> <span>å…§æº«å‹•ç‰©ä¸»è¦é ä»£è¬ä½œç”¨ç”¢ç”Ÿç†±èƒ½ç¶­æŒé«”æº«ã€‚</span></label>
                </div>
                <button onclick="checkQ1()" class="mt-6 bg-blue-600 text-white px-8 py-3 rounded-full text-lg font-bold hover:bg-blue-500 transition shadow-lg transform hover:-translate-y-1">æª¢æŸ¥ç­”æ¡ˆ</button>
                <div id="fb-q1" class="text-lg font-bold mt-4 hidden p-3 rounded-lg"></div>
            </div>
        </section>

        <!-- æŒ‘æˆ° 2ï¼šèœ¥èœ´çš„æŠ‰æ“‡ -->
        <section class="learning-section border-l-8 border-l-yellow-400">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold text-slate-800">2. æŒ‘æˆ°ï¼šèœ¥èœ´çš„æŠ‰æ“‡</h2>
                <span class="bg-yellow-100 text-yellow-800 text-base px-3 py-1 rounded-lg font-bold">å¤–æº«å‹•ç‰©æƒ…å¢ƒ</span>
            </div>
            
            <div class="bg-slate-50 p-6 rounded-2xl mb-6 border-2 border-slate-200">
                <p class="font-bold text-slate-700 text-xl mb-2">
                    <i class="fa-solid fa-circle-exclamation text-blue-500"></i> ç›®å‰ç‹€æ…‹ï¼š
                    <span class="text-blue-600 bg-blue-50 px-2 py-1 rounded">é«”æº« 15Â°C (å¯’å†·)</span>
                </p>
                <p class="text-lg text-slate-600 mt-2 leading-relaxed">
                    èœ¥èœ´è¦ºå¾—èº«é«”åƒµç¡¬ï¼Œå‹•ä½œç·©æ…¢ã€‚ä½œç‚ºä¸€éš»<b>å¤–æº«å‹•ç‰©</b>ï¼Œç‰ è©²æ€éº¼åšæ‰èƒ½è®“é«”æº«ä¸Šå‡ï¼Ÿ
                </p>
            </div>

            <div class="game-container shadow-inner border-2 border-slate-200" id="lizard-game-bg">
                <div class="absolute left-6 top-6 text-yellow-500 text-6xl animate-spin-slow" style="animation-duration: 10s"><i class="fa-solid fa-sun"></i></div>
                <div class="absolute right-6 top-6 text-slate-600 text-6xl"><i class="fa-solid fa-cloud"></i></div>
                
                <div id="lizard" class="lizard-shiver" style="font-size: 5rem; position: absolute; bottom: 40px; left: 60%;">
                    <i class="fa-solid fa-staff-snake"></i>
                    <div id="liz-speech" class="absolute -top-16 -right-12 bg-white p-3 rounded-2xl text-base font-bold shadow-lg border-2 border-slate-100">å¥½å†·...</div>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-4" id="liz-choices">
                <button onclick="solveLizard('A', this)" class="choice-btn group">
                    <i class="fa-solid fa-sun text-yellow-500 text-4xl mb-3 group-hover:scale-110 transition"></i>
                    <div class="font-bold text-xl text-slate-800 mb-1">è¡Œç‚ºï¼šæ›¬å¤ªé™½</div>
                    <div class="text-base text-slate-500">å¸å–ç’°å¢ƒç†±èƒ½</div>
                </button>
                <button onclick="solveLizard('B', this)" class="choice-btn group">
                    <i class="fa-solid fa-cloud text-slate-500 text-4xl mb-3 group-hover:scale-110 transition"></i>
                    <div class="font-bold text-xl text-slate-800 mb-1">è¡Œç‚ºï¼šèº²é™°å½±</div>
                    <div class="text-base text-slate-500">é¿å…é™½å…‰ç›´å°„</div>
                </button>
                <button onclick="solveLizard('C', this)" class="choice-btn group">
                    <i class="fa-solid fa-drumstick-bite text-orange-500 text-4xl mb-3 group-hover:scale-110 transition"></i>
                    <div class="font-bold text-xl text-slate-800 mb-1">ç”Ÿç†ï¼šä»£è¬ç”¢ç†±</div>
                    <div class="text-base text-slate-500">é€²é£Ÿæˆ–é¡«æŠ–</div>
                </button>
                <button onclick="solveLizard('D', this)" class="choice-btn group">
                    <i class="fa-solid fa-droplet text-blue-500 text-4xl mb-3 group-hover:scale-110 transition"></i>
                    <div class="font-bold text-xl text-slate-800 mb-1">ç”Ÿç†ï¼šæ’æ±—æ•£ç†±</div>
                    <div class="text-base text-slate-500">æµæ±—æˆ–æ“´å¼µè¡€ç®¡</div>
                </button>
            </div>
            
            <div id="liz-feedback" class="mt-6 p-5 rounded-xl hidden text-lg font-bold border-2"></div>

            <div class="quiz-block mt-8 hidden" id="liz-quiz-block">
                <div class="font-bold text-yellow-600 mb-4 text-xl"><i class="fa-solid fa-check-double"></i> è§€å¿µç¢ºèª</div>
                <p class="text-lg text-slate-800 mb-4 font-bold">
                    å‰›å‰›èœ¥èœ´é¸æ“‡ã€Œæ›¬å¤ªé™½ã€ï¼Œé€™è­‰å¯¦äº†å¤–æº«å‹•ç‰©ä¸»è¦ä¾é ï¼š
                </p>
                <div class="flex gap-4 mt-4">
                    <button onclick="checkQ2('env')" class="bg-white border-2 border-slate-300 hover:bg-yellow-50 hover:border-yellow-400 px-6 py-3 rounded-xl text-lg font-bold text-slate-700 transition">ç’°å¢ƒç†±æº</button>
                    <button onclick="checkQ2('meta')" class="bg-white border-2 border-slate-300 hover:bg-yellow-50 hover:border-yellow-400 px-6 py-3 rounded-xl text-lg font-bold text-slate-700 transition">ä»£è¬ç”¢ç†±</button>
                </div>
                <div id="fb-q2" class="text-lg font-bold mt-4 hidden p-3 rounded-lg"></div>
            </div>
        </section>

        <!-- æŒ‘æˆ° 3ï¼šåŒ—æ¥µç†Šçš„æŠ‰æ“‡ -->
        <section class="learning-section border-l-8 border-l-blue-400">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold text-slate-800">3. æŒ‘æˆ°ï¼šåŒ—æ¥µç†Šçš„æŠ‰æ“‡</h2>
                <span class="bg-blue-100 text-blue-800 text-base px-3 py-1 rounded-lg font-bold">å…§æº«å‹•ç‰©æƒ…å¢ƒ</span>
            </div>
            
            <div class="bg-slate-50 p-6 rounded-2xl mb-6 border-2 border-slate-200">
                <p class="font-bold text-slate-700 text-xl mb-2">
                    <i class="fa-solid fa-circle-exclamation text-blue-500"></i> ç›®å‰ç‹€æ…‹ï¼š
                    <span class="text-blue-600 bg-blue-50 px-2 py-1 rounded">ç’°å¢ƒ -30Â°C (æ¥µå¯’)</span>
                </p>
                <p class="text-lg text-slate-600 mt-2 leading-relaxed">
                    æš´é¢¨é›ªä¾†è¥²ï¼Œé™½å…‰å¾®å¼±ã€‚ä½œç‚ºä¸€éš»<b>å…§æº«å‹•ç‰©</b>ï¼ŒåŒ—æ¥µç†Šè©²å¦‚ä½•ç¶­æŒé«”æº«ï¼Ÿ
                </p>
            </div>

            <div class="game-container shadow-inner border-2 border-slate-200" id="bear-game-bg">
                <div class="absolute inset-0 flex items-center justify-center opacity-30 text-white text-9xl">
                    <i class="fa-regular fa-snowflake"></i>
                </div>
                <div id="bear" class="bear-shiver" style="font-size: 6rem; position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);">
                    <i class="fa-solid fa-bear-code text-white drop-shadow-lg"></i>
                    <div id="bear-speech" class="absolute -top-16 -right-20 bg-white p-3 rounded-2xl text-base font-bold shadow-lg border-2 border-slate-100 text-slate-800">
                        ç¶­æŒä¸ä½é«”æº«äº†...
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-4" id="bear-choices">
                <button onclick="solveBear('A', this)" class="choice-btn group">
                    <i class="fa-solid fa-sun text-yellow-500 text-4xl mb-3 group-hover:scale-110 transition"></i>
                    <div class="font-bold text-xl text-slate-800 mb-1">è¡Œç‚ºï¼šæ›¬å¤ªé™½</div>
                    <div class="text-base text-slate-500">å¸å–ç’°å¢ƒç†±èƒ½</div>
                </button>
                <button onclick="solveBear('B', this)" class="choice-btn group">
                    <i class="fa-solid fa-cloud text-slate-500 text-4xl mb-3 group-hover:scale-110 transition"></i>
                    <div class="font-bold text-xl text-slate-800 mb-1">è¡Œç‚ºï¼šèº²é™°å½±</div>
                    <div class="text-base text-slate-500">é¿å…é™½å…‰ç›´å°„</div>
                </button>
                <button onclick="solveBear('C', this)" class="choice-btn group">
                    <i class="fa-solid fa-drumstick-bite text-orange-500 text-4xl mb-3 group-hover:scale-110 transition"></i>
                    <div class="font-bold text-xl text-slate-800 mb-1">ç”Ÿç†ï¼šä»£è¬ç”¢ç†±</div>
                    <div class="text-base text-slate-500">é€²é£Ÿæˆ–é¡«æŠ–</div>
                </button>
                <button onclick="solveBear('D', this)" class="choice-btn group">
                    <i class="fa-solid fa-droplet text-blue-500 text-4xl mb-3 group-hover:scale-110 transition"></i>
                    <div class="font-bold text-xl text-slate-800 mb-1">ç”Ÿç†ï¼šæ’æ±—æ•£ç†±</div>
                    <div class="text-base text-slate-500">æµæ±—æˆ–æ“´å¼µè¡€ç®¡</div>
                </button>
            </div>

            <div id="bear-feedback" class="mt-6 p-5 rounded-xl hidden text-lg font-bold border-2"></div>

            <div class="quiz-block mt-8 hidden" id="bear-quiz-block">
                <div class="font-bold text-blue-600 mb-4 text-xl"><i class="fa-solid fa-check-double"></i> è§€å¿µç¢ºèª</div>
                <p class="text-lg text-slate-800 mb-4 font-bold">
                    åŒ—æ¥µç†Šé¸æ“‡ã€Œä»£è¬ç”¢ç†±ã€ï¼Œé€™ä»£è¡¨å…§æº«å‹•ç‰©çš„é«”æº«ä¾†æºä¸»è¦æ˜¯ï¼š
                </p>
                <div class="flex gap-4 mt-4">
                    <button onclick="checkQ3('env')" class="bg-white border-2 border-slate-300 hover:bg-blue-50 hover:border-blue-400 px-6 py-3 rounded-xl text-lg font-bold text-slate-700 transition">ç’°å¢ƒæº«åº¦</button>
                    <button onclick="checkQ3('self')" class="bg-white border-2 border-slate-300 hover:bg-blue-50 hover:border-blue-400 px-6 py-3 rounded-xl text-lg font-bold text-slate-700 transition">è‡ªèº«ç´°èƒä»£è¬</button>
                </div>
                <div id="fb-q3" class="text-lg font-bold mt-4 hidden p-3 rounded-lg"></div>
            </div>
        </section>

        <!-- é å°¾å°èˆª -->
        <div class="text-center pb-16">
            <p id="final-msg" class="text-slate-500 text-lg mb-6 font-medium">
                <i class="fa-solid fa-lock"></i> è«‹å®Œæˆæ‰€æœ‰ 3 å€‹æŒ‘æˆ°èˆ‡æ¸¬é©—ä»¥è§£é–ä¸‹ä¸€é 
            </p>
            <a id="next-btn" href="t0-a1.html" class="btn-locked inline-flex items-center gap-3 bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-12 rounded-full shadow-xl transition-all transform active:scale-95 text-xl">
                ä¸‹ä¸€é  <i class="fa-solid fa-arrow-right"></i>
            </a>
        </div>
    </main>

    <!-- JavaScript é‚è¼¯ -->
    <script>
        // --- éŠæˆ²ç‹€æ…‹ ---
        const progress = { game1: false, q1: false, q2: false, q3: false };
        
        // --- æŒ‘æˆ° 1ï¼šåˆ†é¡éŠæˆ²é‚è¼¯ ---
        const animals = [
            { id: 'a1', name: 'äººé¡', icon: 'fa-person', type: 'endo', color: 'text-blue-500' },
            { id: 'a2', name: 'èœ¥èœ´', icon: 'fa-staff-snake', type: 'ecto', color: 'text-green-600' },
            { id: 'a3', name: 'é’è›™', icon: 'fa-frog', type: 'ecto', color: 'text-green-500' },
            { id: 'a4', name: 'é³¥é¡', icon: 'fa-dove', type: 'endo', color: 'text-sky-400' },
            { id: 'a5', name: 'é­š', icon: 'fa-fish', type: 'ecto', color: 'text-orange-400' },
            { id: 'a6', name: 'ç‹—', icon: 'fa-dog', type: 'endo', color: 'text-amber-600' },
        ];
        let selectedAnimal = null;
        let sortedCount = 0;

        // åˆå§‹åŒ–éŠæˆ²
        function initSortGame() {
            const pool = document.getElementById('animal-pool');
            // éš¨æ©Ÿæ‰“äº‚
            animals.sort(() => Math.random() - 0.5);
            animals.forEach(a => {
                const el = document.createElement('div');
                el.className = 'animal-card bg-white border-2 border-slate-200 rounded-xl p-2 w-28 h-28 flex flex-col items-center justify-center shadow-md hover:shadow-lg';
                el.id = a.id;
                el.onclick = () => selectAnimal(a);
                el.innerHTML = `
                    <i class="fa-solid ${a.icon} ${a.color} text-4xl mb-2"></i>
                    <span class="text-lg font-bold text-slate-700">${a.name}</span>
                `;
                pool.appendChild(el);
            });
        }
        initSortGame();

        function selectAnimal(animal) {
            // å¦‚æœå·²ç¶“åˆ†é¡éäº†ï¼Œä¸åšåæ‡‰
            if (document.getElementById(animal.id).classList.contains('sorted')) return;

            // æ¸…é™¤ä¹‹å‰çš„é¸å–
            if (selectedAnimal) {
                document.getElementById(selectedAnimal.id).classList.remove('selected');
            }
            
            // é¸å–æ–°çš„
            selectedAnimal = animal;
            document.getElementById(animal.id).classList.add('selected');
            
            // æç¤ºç±ƒå­
            document.getElementById('target-ecto').classList.add('active-target');
            document.getElementById('target-endo').classList.add('active-target');
            document.getElementById('sort-feedback').innerText = `å·²é¸æ“‡ ${animal.name}ï¼Œè«‹é»æ“Šä¸Šæ–¹æ­£ç¢ºçš„ç±ƒå­ã€‚`;
        }

        function placeAnimal(targetType) {
            if (!selectedAnimal) {
                shakeBox(targetType === 'ecto' ? 'target-ecto' : 'target-endo');
                document.getElementById('sort-feedback').innerText = "è«‹å…ˆåœ¨ä¸‹æ–¹é»é¸ä¸€éš»å‹•ç‰©ï¼";
                return;
            }

            const targetBox = document.getElementById(`target-${targetType}`);
            const feedback = document.getElementById('sort-feedback');

            if (selectedAnimal.type === targetType) {
                // æ­£ç¢º
                const el = document.getElementById(selectedAnimal.id);
                el.classList.remove('selected');
                el.classList.add('sorted');
                el.onclick = null; // ç§»é™¤é»æ“Šäº‹ä»¶
                
                // ç§»å‹• DOM åˆ°ç±ƒå­å…§
                const container = document.getElementById(`container-${targetType}`);
                container.appendChild(el);
                
                // æ’­æ”¾éŸ³æ•ˆæˆ–è¦–è¦ºå›é¥‹
                feedback.innerText = "â­• æ­£ç¢ºåˆ†é¡ï¼";
                feedback.className = "text-center text-lg font-bold text-green-600 mt-4 min-h-[2rem]";
                
                selectedAnimal = null;
                sortedCount++;
                resetTargets();

                // æª¢æŸ¥æ˜¯å¦å®Œæˆ
                if (sortedCount === animals.length) {
                    completeSortGame();
                }
            } else {
                // éŒ¯èª¤
                feedback.innerText = "âŒ åˆ†é¡éŒ¯èª¤ï¼Œè«‹å†è©¦ä¸€æ¬¡ï¼";
                feedback.className = "text-center text-lg font-bold text-red-500 mt-4 min-h-[2rem]";
                shakeBox(`target-${targetType}`);
            }
        }

        function resetTargets() {
            document.getElementById('target-ecto').classList.remove('active-target');
            document.getElementById('target-endo').classList.remove('active-target');
        }

        function shakeBox(id) {
            const el = document.getElementById(id);
            el.classList.add('shake');
            setTimeout(() => el.classList.remove('shake'), 300);
        }

        function completeSortGame() {
            progress.game1 = true;
            document.getElementById('sort-feedback').innerText = "ğŸ‰ å…¨éƒ¨åˆ†é¡å®Œæˆï¼è§£é–çŸ¥è­˜å¡èˆ‡æ¸¬é©—ã€‚";
            document.getElementById('info-ecto').classList.remove('hidden');
            document.getElementById('info-endo').classList.remove('hidden');
            
            // é¡¯ç¤ºæ¸¬é©—
            const quiz = document.getElementById('quiz-1-block');
            quiz.classList.remove('hidden');
            // è®“å®ƒæ·¡å…¥
            setTimeout(() => quiz.classList.remove('opacity-0'), 100);
        }


        // --- å…¨åŸŸè©•é‡æª¢æŸ¥ ---
        function checkAllPass() {
            if (progress.game1 && progress.q1 && progress.q2 && progress.q3) {
                const btn = document.getElementById('next-btn');
                const msg = document.getElementById('final-msg');
                btn.classList.remove('btn-locked');
                btn.classList.add('animate-bounce');
                msg.innerHTML = '<i class="fa-solid fa-check-circle text-green-500"></i> å¤ªæ£’äº†ï¼æ‚¨å·²æŒæ¡ç”Ÿå­˜æŠ€å·§ï¼Œè«‹é€²å…¥ä¸‹ä¸€å–®å…ƒã€‚';
                msg.classList.remove('text-slate-500');
                msg.classList.add('text-green-600', 'font-bold');
            }
        }

        // --- è©•é‡ 1 æª¢æŸ¥ ---
        function checkQ1() {
            if (!progress.game1) return; // éŠæˆ²æ²’éä¸èƒ½åš
            const val = document.querySelector('input[name="q1"]:checked')?.value;
            const fb = document.getElementById('fb-q1');
            fb.classList.remove('hidden', 'bg-green-100', 'text-green-700', 'bg-red-100', 'text-red-700');
            
            if (val === 'C') {
                fb.innerText = "â­• æ­£ç¢ºï¼å…§æº«å‹•ç‰©é ä»£è¬ç”¢ç†±ã€‚";
                fb.classList.add('bg-green-100', 'text-green-700');
                progress.q1 = true;
                document.querySelectorAll('input[name="q1"]').forEach(i => i.disabled = true);
                checkAllPass();
            } else {
                fb.innerText = "âŒ éŒ¯èª¤ã€‚èœ¥èœ´æ˜¯å¤–æº«ï¼Œäººé¡æ˜¯å…§æº«ã€‚";
                fb.classList.add('bg-red-100', 'text-red-700');
            }
        }

        // --- æŒ‘æˆ° 2ï¼šèœ¥èœ´é‚è¼¯ ---
        function solveLizard(choice, btn) {
            const feedback = document.getElementById('liz-feedback');
            const lizard = document.getElementById('lizard');
            const speech = document.getElementById('liz-speech');
            const quizBlock = document.getElementById('liz-quiz-block');
            
            document.querySelectorAll('#liz-choices .choice-btn').forEach(b => {
                b.classList.remove('correct', 'wrong', 'ring-4', 'ring-blue-400');
                b.disabled = true;
            });
            feedback.classList.remove('hidden', 'bg-red-50', 'text-red-700', 'border-red-200', 'bg-green-50', 'text-green-700', 'border-green-200');

            if (choice === 'A') {
                btn.classList.add('correct', 'ring-4', 'ring-green-500');
                lizard.classList.remove('lizard-shiver');
                lizard.style.left = '20%';
                lizard.classList.add('lizard-happy');
                speech.innerText = "æš–å‘¼å‘¼ï¼";
                feedback.innerText = "â­• ç­”å°äº†ï¼å¤–æº«å‹•ç‰©ä¸»è¦åˆ©ç”¨ã€Œè¡Œç‚ºèª¿ç¯€ã€ï¼ˆå¦‚æ›¬å¤ªé™½ï¼‰ä¾†ç²å–ç’°å¢ƒç†±èƒ½ã€‚";
                feedback.classList.add('bg-green-50', 'text-green-700', 'border-green-200');
                quizBlock.classList.remove('hidden');
            } else {
                btn.classList.add('wrong');
                feedback.innerText = "âŒ ç­”éŒ¯äº†ã€‚å¤–æº«å‹•ç‰©ç„¡æ³•æœ‰æ•ˆé ä»£è¬ç”¢ç†± (C) æˆ–ç”Ÿç†æ’æ±— (D)ï¼Œèº²é™°å½± (B) æœƒæ›´å†·å–”ï¼";
                feedback.classList.add('bg-red-50', 'text-red-700', 'border-red-200');
                setTimeout(() => {
                    document.querySelectorAll('#liz-choices .choice-btn').forEach(b => {
                        b.disabled = false;
                        b.classList.remove('wrong');
                    });
                }, 1500);
            }
            feedback.classList.remove('hidden');
        }

        function checkQ2(ans) {
            const fb = document.getElementById('fb-q2');
            fb.classList.remove('hidden', 'bg-green-100', 'text-green-700', 'bg-red-100', 'text-red-700');
            if (ans === 'env') {
                fb.innerText = "â­• æ­£ç¢ºï¼";
                fb.classList.add('bg-green-100', 'text-green-700');
                progress.q2 = true;
                checkAllPass();
            } else {
                fb.innerText = "âŒ éŒ¯èª¤ï¼Œé‚£æ˜¯å…§æº«å‹•ç‰©çš„ç‰¹å¾µã€‚";
                fb.classList.add('bg-red-100', 'text-red-700');
            }
        }

        // --- æŒ‘æˆ° 3ï¼šåŒ—æ¥µç†Šé‚è¼¯ ---
        function solveBear(choice, btn) {
            const feedback = document.getElementById('bear-feedback');
            const bear = document.getElementById('bear');
            const speech = document.getElementById('bear-speech');
            const quizBlock = document.getElementById('bear-quiz-block');

            document.querySelectorAll('#bear-choices .choice-btn').forEach(b => {
                b.classList.remove('correct', 'wrong', 'ring-4', 'ring-green-500');
                b.disabled = true;
            });
            feedback.classList.remove('hidden', 'bg-red-50', 'text-red-700', 'border-red-200', 'bg-green-50', 'text-green-700', 'border-green-200');

            if (choice === 'C') {
                btn.classList.add('correct', 'ring-4', 'ring-green-500');
                bear.classList.remove('bear-shiver');
                bear.classList.add('bear-warm');
                bear.innerHTML = '<i class="fa-solid fa-face-grin-tongue text-white drop-shadow-lg"></i>';
                speech.innerText = "èº«é«”ç†±èµ·ä¾†äº†ï¼";
                feedback.innerText = "â­• ç­”å°äº†ï¼å…§æº«å‹•ç‰©åœ¨æ¥µå¯’ç’°å¢ƒä¸‹ï¼Œä¸»è¦é ã€Œå¢åŠ ä»£è¬ã€ï¼ˆé¡«æŠ–æˆ–é€²é£Ÿï¼‰ä¾†ç¶­æŒé«”æº«ã€‚";
                feedback.classList.add('bg-green-50', 'text-green-700', 'border-green-200');
                quizBlock.classList.remove('hidden');
            } else {
                btn.classList.add('wrong');
                let reason = choice === 'A' ? "æ¥µåœ°é™½å…‰å¾®å¼±ã€‚" : choice === 'B' ? "èº²é™°å½±æ›´å†·ï¼" : "æµæ±—æœƒå¤±æº«ï¼";
                feedback.innerText = "âŒ ç­”éŒ¯äº†ã€‚" + reason;
                feedback.classList.add('bg-red-50', 'text-red-700', 'border-red-200');
                setTimeout(() => {
                    document.querySelectorAll('#bear-choices .choice-btn').forEach(b => {
                        b.disabled = false;
                        b.classList.remove('wrong');
                    });
                }, 1500);
            }
            feedback.classList.remove('hidden');
        }

        function checkQ3(ans) {
            const fb = document.getElementById('fb-q3');
            fb.classList.remove('hidden', 'bg-green-100', 'text-green-700', 'bg-red-100', 'text-red-700');
            if (ans === 'self') {
                fb.innerText = "â­• æ­£ç¢ºï¼";
                fb.classList.add('bg-green-100', 'text-green-700');
                progress.q3 = true;
                checkAllPass();
            } else {
                fb.innerText = "âŒ éŒ¯èª¤ï¼Œå…§æº«å‹•ç‰©ä¸ä¾è³´ç’°å¢ƒæº«åº¦ã€‚";
                fb.classList.add('bg-red-100', 'text-red-700');
            }
        }
    </script>
</body>
</html>
